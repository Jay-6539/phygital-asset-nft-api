#!/bin/bash

echo "ğŸš€ Phygital Asset NFT API - Railwayå¿«é€Ÿéƒ¨ç½²è„šæœ¬"
echo "=============================================="

echo ""
echo "ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡ï¼š"
echo "=============="

# æ£€æŸ¥å¿…è¦æ–‡ä»¶
if [ ! -f "nft-api-server-amoy.js" ]; then
    echo "âŒ é”™è¯¯ï¼šæ‰¾ä¸åˆ° nft-api-server-amoy.js"
    exit 1
fi

if [ ! -f "package.json" ]; then
    echo "âŒ é”™è¯¯ï¼šæ‰¾ä¸åˆ° package.json"
    exit 1
fi

echo "âœ… éƒ¨ç½²æ–‡ä»¶å‡†å¤‡å°±ç»ª"

echo ""
echo "ğŸŒ æ­¥éª¤1ï¼šåˆ›å»ºGitHubä»“åº“"
echo "========================"
echo "1. è®¿é—® https://github.com"
echo "2. ç™»å½•æ‚¨çš„GitHubè´¦å·"
echo "3. ç‚¹å‡»å³ä¸Šè§’çš„ '+' æŒ‰é’®"
echo "4. é€‰æ‹© 'New repository'"
echo "5. ä»“åº“åç§°ï¼šphygital-asset-nft-api"
echo "6. æè¿°ï¼šPhygital Asset NFT API Server for Amoy Testnet"
echo "7. é€‰æ‹© 'Public'"
echo "8. ä¸è¦å‹¾é€‰ä»»ä½•é€‰é¡¹"
echo "9. ç‚¹å‡» 'Create repository'"

echo ""
echo "ğŸ“¤ æ­¥éª¤2ï¼šæ¨é€ä»£ç åˆ°GitHub"
echo "=========================="
echo "åˆ›å»ºä»“åº“åï¼ŒGitHubä¼šæ˜¾ç¤ºç±»ä¼¼è¿™æ ·çš„URLï¼š"
echo "https://github.com/ä½ çš„ç”¨æˆ·å/phygital-asset-nft-api.git"
echo ""
echo "è¯·å¤åˆ¶è¿™ä¸ªURLï¼Œç„¶åè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š"
echo ""
echo "git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/phygital-asset-nft-api.git"
echo "git push -u origin main"
echo ""
echo "æŒ‰Enterç»§ç»­..."
read -p "æŒ‰Enterç»§ç»­..."

echo ""
echo "ğŸš‚ æ­¥éª¤3ï¼šRailwayéƒ¨ç½²"
echo "===================="
echo "1. è®¿é—® https://railway.app"
echo "2. ä½¿ç”¨GitHubè´¦å·ç™»å½•"
echo "3. ç‚¹å‡» 'New Project'"
echo "4. é€‰æ‹© 'Deploy from GitHub repo'"
echo "5. é€‰æ‹© 'phygital-asset-nft-api' ä»“åº“"

echo ""
echo "âš™ï¸ æ­¥éª¤4ï¼šé…ç½®ç¯å¢ƒå˜é‡"
echo "====================="
echo "åœ¨Railway Dashboardçš„Variablesæ ‡ç­¾é¡µæ·»åŠ ï¼š"
echo ""
echo "AMOY_RPC_URL=https://rpc-amoy.polygon.technology/"
echo "AMOY_CHAIN_ID=80002"
echo "CONTRACT_ADDRESS=0xA0fA27fC547D544528e9BE0cb6569E9B925e533E"
echo "AMOY_PRIVATE_KEY=ä½ çš„ç§é’¥"
echo "NODE_ENV=production"
echo ""
echo "âš ï¸ é‡è¦ï¼šè¯·ç¡®ä¿ç§é’¥æ ¼å¼æ­£ç¡®ï¼ˆ64ä½åå…­è¿›åˆ¶ï¼‰"

echo ""
echo "ğŸš€ æ­¥éª¤5ï¼šè‡ªåŠ¨éƒ¨ç½²"
echo "=================="
echo "Railwayä¼šè‡ªåŠ¨ï¼š"
echo "âœ… æ£€æµ‹package.json"
echo "âœ… å®‰è£…ä¾èµ–"
echo "âœ… å¯åŠ¨æœåŠ¡"
echo "âœ… æä¾›HTTPS URL"

echo ""
echo "ğŸ“Š æ­¥éª¤6ï¼šè·å–éƒ¨ç½²URL"
echo "====================="
echo "éƒ¨ç½²å®Œæˆåï¼ŒRailwayä¼šæä¾›ä¸€ä¸ªURLï¼Œç±»ä¼¼ï¼š"
echo "https://phygital-asset-nft-api-production.up.railway.app"
echo ""
echo "è¯·è®°å½•è¿™ä¸ªURLï¼Œç¨åéœ€è¦æ›´æ–°iOSåº”ç”¨é…ç½®"

echo ""
echo "ğŸ§ª æ­¥éª¤7ï¼šæµ‹è¯•éƒ¨ç½²"
echo "================="
echo "ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æµ‹è¯•APIï¼š"
echo ""
echo "# å¥åº·æ£€æŸ¥"
echo "curl https://your-railway-url.up.railway.app/api/health"
echo ""
echo "# NFTé“¸é€ æµ‹è¯•"
echo "curl -X POST https://your-railway-url.up.railway.app/api/mint-thread \\"
echo "  -H \"Content-Type: application/json\" \\"
echo "  -d '{\"threadId\":\"test-railway\",\"username\":\"Railway Test\"}'"

echo ""
echo "ğŸ“± æ­¥éª¤8ï¼šæ›´æ–°iOSåº”ç”¨"
echo "===================="
echo "åœ¨ NFTManager.swift ä¸­æ›´æ–°API URLï¼š"
echo ""
echo "private let apiURL: String = {"
echo "    #if DEBUG"
echo "    return \"http://127.0.0.1:3000/api\"  // å¼€å‘ç¯å¢ƒ"
echo "    #else"
echo "    return \"https://your-railway-url.up.railway.app/api\"  // ç”Ÿäº§ç¯å¢ƒ"
echo "    #endif"
echo "}()"

echo ""
echo "âœ… å®Œæˆï¼"
echo "========"
echo "ç°åœ¨æ‚¨çš„APIæœåŠ¡å·²ç»ï¼š"
echo "âœ… è¿è¡Œåœ¨Railwayäº‘ç«¯"
echo "âœ… 24/7å¯ç”¨"
echo "âœ… å…¨çƒå¯è®¿é—®"
echo "âœ… è‡ªåŠ¨HTTPS"

echo ""
echo "ğŸ¯ ä¸‹ä¸€æ­¥ï¼š"
echo "=========="
echo "1. å®ŒæˆGitHubä»“åº“åˆ›å»º"
echo "2. æ¨é€ä»£ç åˆ°GitHub"
echo "3. åœ¨Railwayä¸Šéƒ¨ç½²"
echo "4. æµ‹è¯•APIåŠŸèƒ½"
echo "5. æ›´æ–°iOSåº”ç”¨é…ç½®"

echo ""
echo "ğŸš€ å¼€å§‹éƒ¨ç½²å§ï¼"
